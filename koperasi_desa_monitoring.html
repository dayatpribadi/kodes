<!DOCTYPE html>
<html dir="ltr">

<head>
    <!-- Required meta tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Links Of CSS File -->
    <link rel="stylesheet" href="assets/css/remixicon.css">
    <link rel="stylesheet" href="assets/css/apexcharts.css">
    <link rel="stylesheet" href="assets/css/simplebar.css">
    <link rel="stylesheet" href="assets/css/prism.css">
    <link rel="stylesheet" href="assets/css/jsvectormap.min.css">
    <link rel="stylesheet" href="assets/css/swiper-bundle.min.css">
    <link rel="stylesheet" href="assets/css/quill.snow.css">
    <link rel="stylesheet" href="assets/css/style.css">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="assets/images/favicon.ico">

    <!-- Title -->
    <title>Aplikasi Sidesi Kabupaten Ogan Ilir</title>

    <!-- Font Family -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
        rel="stylesheet">

    <!-- Material Icons -->
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
</head>

<body>

    <!-- Sidebar -->
    <div class="sidebar-area bg-white dark:bg-[#0c1427] fixed overflow-hidden z-[7] top-0 h-screen transition-all rounded-r-md"
        id="sidebar-area">
        <div
            class="logo bg-white dark:bg-[#0c1427] border-b border-gray-100 dark:border-[#172036] px-[25px] pt-[19px] pb-[15px] absolute z-[2] right-0 top-0 left-0">
            <a href="koperasi_desa_dashboard.html" class="transition-none relative flex items-center">
                <img src="assets/images/logo-icon.svg" alt="logo-icon">
                <span class="font-bold text-black dark:text-white relative ltr:ml-[8px] rtl:mr-[8px] top-px text-xl">
                    Sidesi
                </span>
            </a>
            <button type="button"
                class="burger-menu inline-block absolute z-[3] top-[24px] ltr:right-[25px] rtl:left-[25px] transition-all hover:text-primary-500"
                id="hide-sidebar-toggle2">
                <i class="material-symbols-outlined">
                    close
                </i>
            </button>
        </div>
        <div class="pt-[89px] px-[25px] pb-[20px] h-screen" data-simplebar>
            <div class="accordion">
                <span
                    class="block relative font-medium uppercase text-gray-400 mb-[8px] text-xs [&:not(:first-child)]:mt-[22px]">
                    Koperasi Desa
                </span>
                <div class="accordion-item rounded-md text-black dark:text-white mb-[5px] whitespace-nowrap">
                    <a href="koperasi_desa_dashboard.html"
                        class="accordion-button flex items-center transition-all py-[9px] ltr:pl-[14px] ltr:pr-[30px] rtl:pr-[14px] rtl:pl-[30px] rounded-md font-medium w-full relative hover:bg-gray-50 text-left dark:hover:bg-[#15203c]">
                        <i
                            class="material-symbols-outlined transition-all text-gray-500 dark:text-gray-400 ltr:mr-[7px] rtl:ml-[7px] !text-[22px] leading-none relative -top-px">
                            home_app_logo
                        </i>
                        <span class="title leading-none">
                            Dashboard
                        </span>
                    </a>
                </div>

                <div class="accordion-item rounded-md text-black dark:text-white mb-[5px] whitespace-nowrap">
                    <button
                        class="accordion-button toggle flex items-center transition-all py-[9px] ltr:pl-[14px] ltr:pr-[30px] rtl:pr-[14px] rtl:pl-[30px] rounded-md font-medium w-full relative hover:bg-gray-50 text-left dark:hover:bg-[#15203c]"
                        type="button">
                        <i
                            class="material-symbols-outlined transition-all text-gray-500 dark:text-gray-400 ltr:mr-[7px] rtl:ml-[7px] !text-[22px] leading-none relative -top-px">
                            groups_3
                        </i>
                        <span class="title leading-none">
                            Versi Admin
                        </span>
                    </button>
                    <div class="accordion-collapse show">
                        <div class="pt-[4px]">
                            <ul class="sidebar-sub-menu">
                                <li class="sidemenu-item mb-[4px] last:mb-0">
                                    <a href="koperasi_desa_admin.html"
                                        class="sidemenu-link  rounded-md flex items-center relative transition-all font-medium text-gray-500 dark:text-gray-400 py-[9px] ltr:pl-[38px] ltr:pr-[30px] rtl:pr-[38px] rtl:pl-[30px] hover:text-primary-500 hover:bg-primary-50 w-full text-left dark:hover:bg-[#15203c]">
                                        Koperasi Desa
                                    </a>
                                </li>
                                <li class="sidemenu-item mb-[4px] last:mb-0">
                                    <a href="koperasi_desa_monitoring.html"
                                        class="sidemenu-link active rounded-md flex items-center relative transition-all font-medium text-gray-500 dark:text-gray-400 py-[9px] ltr:pl-[38px] ltr:pr-[30px] rtl:pr-[38px] rtl:pl-[30px] hover:text-primary-500 hover:bg-primary-50 w-full text-left dark:hover:bg-[#15203c]">
                                        Monitoring Kopdes
                                    </a>
                                </li>
                                <li class="sidemenu-item mb-[4px] last:mb-0">
                                    <a href="koperasi_desa_laporan_admin.html" class=" sidemenu-link rounded-md flex items-center relative transition-all
                                        font-medium text-gray-500 dark:text-gray-400 py-[9px] ltr:pl-[38px]
                                        ltr:pr-[30px] rtl:pr-[38px] rtl:pl-[30px] hover:text-primary-500
                                        hover:bg-primary-50 w-full text-left dark:hover:bg-[#15203c]">
                                        Laporan Kopdes
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="accordion-item rounded-md text-black dark:text-white mb-[5px] whitespace-nowrap">
                    <button
                        class="accordion-button toggle flex items-center transition-all py-[9px] ltr:pl-[14px] ltr:pr-[30px] rtl:pr-[14px] rtl:pl-[30px] rounded-md font-medium w-full relative hover:bg-gray-50 text-left dark:hover:bg-[#15203c]"
                        type="button">
                        <i
                            class="material-symbols-outlined transition-all text-gray-500 dark:text-gray-400 ltr:mr-[7px] rtl:ml-[7px] !text-[22px] leading-none relative -top-px">
                            groups_3
                        </i>
                        <span class="title leading-none">
                            Versi User
                        </span>
                    </button>
                    <div class="accordion-collapse hidden">
                        <div class="pt-[4px]">
                            <ul class="sidebar-sub-menu">
                                <li class="sidemenu-item mb-[4px] last:mb-0">
                                    <a href="koperasi_desa.html"
                                        class="sidemenu-link rounded-md flex items-center relative transition-all font-medium text-gray-500 dark:text-gray-400 py-[9px] ltr:pl-[38px] ltr:pr-[30px] rtl:pr-[38px] rtl:pl-[30px] hover:text-primary-500 hover:bg-primary-50 w-full text-left dark:hover:bg-[#15203c]">
                                        Profil Koperasi Desa
                                    </a>
                                </li>
                                <li class="sidemenu-item mb-[4px] last:mb-0">
                                    <a href="koperasi_desa_pembentukan.html" class=" sidemenu-link rounded-md flex items-center relative transition-all
                                        font-medium text-gray-500 dark:text-gray-400 py-[9px] ltr:pl-[38px]
                                        ltr:pr-[30px] rtl:pr-[38px] rtl:pl-[30px] hover:text-primary-500
                                        hover:bg-primary-50 w-full text-left dark:hover:bg-[#15203c]">
                                        Pembentukan Kopdes
                                    </a>
                                </li>
                                <li class="sidemenu-item mb-[4px] last:mb-0">
                                    <a href="koperasi_desa_pengumuman.html"
                                        class="sidemenu-link rounded-md flex items-center relative transition-all font-medium text-gray-500 dark:text-gray-400 py-[9px] ltr:pl-[38px] ltr:pr-[30px] rtl:pr-[38px] rtl:pl-[30px] hover:text-primary-500 hover:bg-primary-50 w-full text-left dark:hover:bg-[#15203c]">
                                        BN SK Kopdes
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="accordion-item rounded-md text-black dark:text-white mb-[5px] whitespace-nowrap">
                    <a href="#"
                        class="accordion-button flex items-center transition-all py-[9px] ltr:pl-[14px] ltr:pr-[30px] rtl:pr-[14px] rtl:pl-[30px] rounded-md font-medium w-full relative hover:bg-gray-50 text-left dark:hover:bg-[#15203c]">
                        <i
                            class="material-symbols-outlined transition-all text-gray-500 dark:text-gray-400 ltr:mr-[7px] rtl:ml-[7px] !text-[22px] leading-none relative -top-px">
                            analytics
                        </i>
                        <span class="title leading-none">
                            Laporan
                        </span>
                    </a>
                </div>

                <div class="accordion-item rounded-md text-black dark:text-white mb-[5px] whitespace-nowrap">
                    <a href="#"
                        class="accordion-button flex items-center transition-all py-[9px] ltr:pl-[14px] ltr:pr-[30px] rtl:pr-[14px] rtl:pl-[30px] rounded-md font-medium w-full relative hover:bg-gray-50 text-left dark:hover:bg-[#15203c]">
                        <i
                            class="material-symbols-outlined transition-all text-gray-500 dark:text-gray-400 ltr:mr-[7px] rtl:ml-[7px] !text-[22px] leading-none relative -top-px">
                            logout
                        </i>
                        <span class="title leading-none">
                            Keluar
                        </span>
                    </a>
                </div>
            </div>
        </div>
    </div>
    <!-- End Sidebar -->

    <!-- Header -->
    <div class="header-area bg-white dark:bg-[#0c1427] py-[13px] px-[20px] md:px-[25px] fixed top-0 z-[6] rounded-b-md transition-all"
        id="header-area">
        <div class="md:flex md:items-center md:justify-between">
            <div class="flex items-center justify-between md:justify-normal">
                <div
                    class="relative leading-none top-px ltr:mr-[13px] ltr:md:mr-[18px] ltr:lg:mr-[23px] rtl:ml-[13px] rtl:md:ml-[18px] rtl:lg:ml-[23px]">
                    <button type="button" class="hide-sidebar-toggle transition-all inline-block hover:text-primary-500"
                        id="hide-sidebar-toggle">
                        <i class="material-symbols-outlined !text-[20px]">
                            menu
                        </i>
                    </button>
                </div>
            </div>
            <ul class="flex items-center justify-between md:justify-normal mt-[13px] md:mt-0">
                <li
                    class="relative mx-[8px] md:mx-[10px] lg:mx-[12px] ltr:first:ml-0 ltr:last:mr-0 rtl:first:mr-0 rtl:last:ml-0">
                    <button type="button"
                        class="light-dark-toggle leading-none inline-block transition-all relative top-[2px] text-[#fe7a36]"
                        id="light-dark-toggle">
                        <i class="material-symbols-outlined !text-[20px] md:!text-[22px]">
                            light_mode
                        </i>
                    </button>
                </li>
                <li
                    class="relative profile-menu mx-[8px] md:mx-[10px] lg:mx-[12px] ltr:first:ml-0 ltr:last:mr-0 rtl:first:mr-0 rtl:last:ml-0">
                    <button type="button"
                        class="flex items-center -mx-[5px] relative ltr:pr-[14px] rtl:pl-[14px] text-black dark:text-white"
                        id="dropdownToggleBtn">
                        <img src="assets/images/admin.png"
                            class="w-[35px] h-[35px] md:w-[42px] md:h-[42px] rounded-full ltr:md:mr-[2px] ltr:lg:mr-[8px] rtl:md:ml-[2px] rtl:lg:ml-[8px] border-[2px] border-primary-200 inline-block"
                            alt="admin-image">
                        <span class="block font-semibold text-[0] lg:text-base">
                            Sidesi
                        </span>
                        <i
                            class="ri-arrow-down-s-line text-[15px] absolute ltr:-right-[3px] rtl:-left-[3px] top-1/2 -translate-y-1/2 mt-px"></i>
                    </button>
                    <div
                        class="profile-menu-dropdown bg-white dark:bg-[#0c1427] transition-all shadow-3xl dark:shadow-none py-[22px] absolute mt-[13px] md:mt-[14px] w-[195px] z-[1] top-full ltr:right-0 rtl:left-0 rounded-md">
                        <div
                            class="flex items-center border-b border-gray-100 dark:border-[#172036] pb-[12px] mx-[20px] mb-[10px]">
                            <img src="assets/images/admin.png"
                                class="rounded-full w-[31px] h-[31px] ltr:mr-[9px] rtl:ml-[9px] border-2 border-primary-200 inline-block"
                                alt="admin-image">
                            <div>
                                <span class="block text-black dark:text-white font-medium">
                                    Sidesi
                                </span>
                                <span class="block text-xs">
                                </span>
                            </div>
                        </div>
                        <ul>
                            <li>
                                <a href="#"
                                    class="block relative py-[7px] ltr:pl-[50px] ltr:pr-[20px] rtl:pr-[50px] rtl:pl-[20px] text-black dark:text-white transition-all hover:text-primary-500">
                                    <i
                                        class="material-symbols-outlined top-1/2 -translate-y-1/2 !text-[22px] absolute ltr:left-[20px] rtl:right-[20px]">
                                        settings
                                    </i>
                                    Profile
                                </a>
                            </li>
                            <li>
                                <a href="#"
                                    class="block relative py-[7px] ltr:pl-[50px] ltr:pr-[20px] rtl:pr-[50px] rtl:pl-[20px] text-black dark:text-white transition-all hover:text-primary-500">
                                    <i
                                        class="material-symbols-outlined top-1/2 -translate-y-1/2 !text-[22px] absolute ltr:left-[20px] rtl:right-[20px]">
                                        logout
                                    </i>
                                    Keluar
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
            </ul>
        </div>
    </div>
    <!-- End Header -->

    <!-- Main Content -->
    <div class="main-content transition-all flex flex-col overflow-hidden min-h-screen" id="main-content">

        <!-- Breadcrumb -->
        <div class="mb-[25px] md:flex items-center justify-between">
            <h5 class="mb-0">
                Koperasi Desa
            </h5>
            <ol class="breadcrumb mt-[12px] md:mt-0">
                <li
                    class="breadcrumb-item inline-block relative text-sm mx-[11px] ltr:first:ml-0 rtl:first:mr-0 ltr:last:mr-0 rtl:last:ml-0">
                    <a href="dashboard.html"
                        class="inline-block relative ltr:pl-[22px] rtl:pr-[22px] transition-all hover:text-primary-500">
                        <i
                            class="material-symbols-outlined absolute ltr:left-0 rtl:right-0 !text-lg -mt-px text-primary-500 top-1/2 -translate-y-1/2">
                            home
                        </i>
                        Dashboard
                    </a>
                </li>
                <li
                    class="breadcrumb-item inline-block relative text-sm mx-[11px] ltr:first:ml-0 rtl:first:mr-0 ltr:last:mr-0 rtl:last:ml-0">
                    Koperasi Desa
                </li>
                <li
                    class="breadcrumb-item inline-block relative text-sm mx-[11px] ltr:first:ml-0 rtl:first:mr-0 ltr:last:mr-0 rtl:last:ml-0">
                    Pembentukan Koperasi Desa
                </li>
            </ol>
        </div>

        <!-- Filter -->

        <!-- Filter -->
        <div class="trezo-card bg-white dark:bg-[#0c1427] mb-[25px] p-[20px] md:p-[25px] rounded-md">
            <div class="trezo-card-header mb-[20px] md:mb-[25px] sm:flex items-center justify-between">
                <div class="trezo-card-title">
                    <h5 class="mb-0">
                        Cari Data Koperasi Desa
                    </h5>
                </div>
            </div>
            <div class="trezo-card-content">
                <form>
                    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-[15px] sm:gap-[20px]">
                        <div>
                            <input type="text"
                                class="h-[44px] rounded-md text-black dark:text-white bg-gray-50 dark:bg-[#0a0e19] px-[17px] block w-full outline-0 placeholder:text-gray-500 dark:placeholder:text-gray-400"
                                placeholder="Cari berdasarkan kriteria">
                        </div>

                        <div>
                            <select
                                class="h-[44px] rounded-md bg-gray-50 dark:bg-[#0a0e19] px-[13px] block w-full outline-0 cursor-pointer">
                                <option selected>
                                    Kecamatan
                                </option>
                            </select>
                        </div>

                        <div>
                            <select id="filterTahapan" onchange="renderChart()"
                                class="h-[44px] rounded-md bg-gray-50 dark:bg-[#0a0e19] px-[13px] block w-full outline-0 cursor-pointer">
                                <option value="">Semua Tahapan</option>
                                <option value="Pra Pembentukan">Pra Pembentukan</option>
                                <option value="Musyawarah">Musyawarah</option>
                                <option value="Rapat Anggota">Rapat Anggota</option>
                                <option value="Penyerahan NPAK">Penyerahan NPAK</option>
                                <option value="SABH">SABH</option>
                                <option value="SK Pengesahan">SK Pengesahan</option>
                                <option value="Pengumuman BN">Pengumuman BN</option>
                            </select>

                        </div>

                        <div>
                            <button
                                class="block w-full text-center py-[10px] px-[30px] bg-primary-500 text-white transition-all hover:bg-primary-400 rounded-md border border-primary-500 hover:border-primary-400"
                                type="button">
                                Terapkan Pencarian
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <!-- Chart -->
        <div id="chart" class="bg-white rounded-md p-4 mb-8"></div>

        <div id="detailData"
            class="trezo-card bg-white dark:bg-[#0c1427] mb-[25px] p-[20px] md:p-[25px] rounded-md mt-[10px] hidden">
            <h2 class="text-xl font-bold text-blue-600 mb-4">Detail Desa & Kopdes</h2>
            <div class="table-responsive overflow-x-auto">
                <table class="w-full">
                    <thead class="text-black dark:text-white">
                        <tr>
                            <th
                                class="font-medium ltr:text-left rtl:text-right px-[20px] py-[11px] md:ltr:first:pl-[25px] md:rtl:first:pr-[25px] ltr:first:pr-0 rtl:first:pl-0 bg-primary-50 dark:bg-[#15203c] whitespace-nowrap">
                                Desa/Kecamatan
                            </th>
                            <th
                                class="font-medium ltr:text-left rtl:text-right px-[20px] py-[11px] md:ltr:first:pl-[25px] md:rtl:first:pr-[25px] ltr:first:pr-0 rtl:first:pl-0 bg-primary-50 dark:bg-[#15203c] whitespace-nowrap">
                                Nama Koperasi
                            </th>
                            <th
                                class="font-medium ltr:text-left rtl:text-right px-[20px] py-[11px] md:ltr:first:pl-[25px] md:rtl:first:pr-[25px] ltr:first:pr-0 rtl:first:pl-0 bg-primary-50 dark:bg-[#15203c] whitespace-nowrap">
                                Tanggal Dibentuk
                            </th>
                            <th
                                class="font-medium ltr:text-left rtl:text-right px-[20px] py-[11px] md:ltr:first:pl-[25px] md:rtl:first:pr-[25px] ltr:first:pr-0 rtl:first:pl-0 bg-primary-50 dark:bg-[#15203c] whitespace-nowrap">
                                Tahapan
                            </th>
                        </tr>
                    </thead>
                    <tbody id="detailTableBody">
                        <!-- Data detail akan dimasukkan lewat JS -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Detail Desa -->

        <div class="grow"></div>

        <!-- Footer -->
        <footer
            class="bg-white dark:bg-[#0c1427] rounded-t-md px-[20px] md:px-[25px] py-[15px] md:py-[20px] text-center">
            <p>
                © <span class="text-purple-500">Copyright</span> Kominfo Ogan Ilir<a href="oganilirkab.go.id"
                    target="_blank" class="text-primary-500 transition-all hover:underline"> 2025</a>
            </p>
        </footer>

    </div>
    <!-- End Main Content -->

    <!-- Links Of JS File -->
    <script src="assets/js/apexcharts.min.js"></script>
    <script src="assets/js/fslightbox.js"></script>
    <script src="assets/js/simplebar.min.js"></script>
    <script src="assets/js/prism.js"></script>
    <script src="assets/js/clipboard.min.js"></script>
    <script src="assets/js/swiper-bundle.min.js"></script>
    <script src="assets/js/fullcalendar.min.js"></script>
    <script src="assets/js/jsvectormap.min.js"></script>
    <script src="assets/js/world-merc.js"></script>
    <script src="assets/js/quill.min.js"></script>
    <script src="assets/js/custom.js"></script>
    <script src="https://unpkg.com/@dotlottie/player-component@2.7.12/dist/dotlottie-player.mjs" type="module"></script>

    <script>
        const kecamatanData = {
            'Indralaya': [{
                    desa: 'Desa A',
                    kopdes: 'Kopdes Indralaya 1',
                    tglBentuk: '2023-01-01',
                    tahapan: 'Musyawarah'
                },
                {
                    desa: 'Desa B',
                    kopdes: 'Kopdes Indralaya 2',
                    tglBentuk: '2023-01-01',
                    tahapan: 'Pra Pembentukan'
                },
                {
                    desa: 'Desa Sakatiga',
                    kopdes: 'Kopdes Indralaya 2',
                    tglBentuk: '2023-01-01',
                    tahapan: 'Pra Pembentukan'
                },
                {
                    desa: 'Desa Sakatiga Seberang',
                    kopdes: 'Kopdes Indralaya 2',
                    tglBentuk: '2023-01-01',
                    tahapan: 'Pra Pembentukan'
                },
                {
                    desa: 'Desa Tanjung Seteko',
                    kopdes: 'Kopdes Indralaya 2',
                    tglBentuk: '2023-01-01',
                    tahapan: 'Pra Pembentukan'
                },
                {
                    desa: 'Desa AA',
                    kopdes: 'Kopdes Indralaya 2',
                    tglBentuk: '2023-01-01',
                    tahapan: 'Pra Pembentukan'
                },
                {
                    desa: 'Desa AA',
                    kopdes: 'Kopdes Indralaya 2',
                    tglBentuk: '2023-01-01',
                    tahapan: 'Pra Pembentukan'
                },
                {
                    desa: 'Desa AA',
                    kopdes: 'Kopdes Indralaya 2',
                    tglBentuk: '2023-01-01',
                    tahapan: 'Pra Pembentukan'
                }
            ],
            'Indralaya Selatan': [{
                desa: 'Desa C',
                kopdes: 'Kopdes Indsel 1',
                tglBentuk: '2023-01-01',
                tahapan: 'Penyerahan NPAK'
            }],
            'Indralaya Utara': [{
                    desa: 'Desa D',
                    kopdes: 'Kopdes Indut 1',
                    tglBentuk: '2023-01-01',
                    tahapan: 'SK Pengesahan'
                },
                {
                    desa: 'Desa E',
                    kopdes: 'Kopdes Indut 2',
                    tglBentuk: '2023-01-01',
                    tahapan: 'SABH'
                }
            ],
            'Kandis': [{
                desa: 'Desa F',
                kopdes: 'Kopdes Kandis',
                tglBentuk: '2023-01-01',
                tahapan: 'Pra Pembentukan'
            }],
            'Lubuk Keliat': [{
                desa: 'Desa G',
                kopdes: 'Kopdes Lubuk 1',
                tglBentuk: '2023-01-01',
                tahapan: 'Musyawarah'
            }],
            'Muara Kuang': [{
                    desa: 'Desa H',
                    kopdes: 'Kopdes Muara 1',
                    tglBentuk: '2023-01-01',
                    tahapan: 'Rapat Anggota'
                },
                {
                    desa: 'Desa I',
                    kopdes: 'Kopdes Muara 2',
                    tglBentuk: '2023-01-01',
                    tahapan: 'Penyerahan NPAK'
                }
            ],
            'Payaraman': [{
                desa: 'Desa J',
                kopdes: 'Kopdes Payaraman',
                tglBentuk: '2023-01-01',
                tahapan: 'Pengumuman BN'
            }],
            'Pemulutan': [{
                desa: 'Desa K',
                kopdes: 'Kopdes Pemulutan 1',
                tglBentuk: '2023-01-01',
                tahapan: 'Musyawarah'
            }],
            'Pemulutan Barat': [{
                desa: 'Desa L',
                kopdes: 'Kopdes PemBar',
                tglBentuk: '2023-01-01',
                tahapan: 'Pra Pembentukan'
            }],
            'Pemulutan Selatan': [{
                desa: 'Desa M',
                kopdes: 'Kopdes PemSel',
                tglBentuk: '2023-01-01',
                tahapan: 'SABH'
            }],
            'Rambang Kuang': [{
                desa: 'Desa N',
                kopdes: 'Kopdes Rambang',
                tglBentuk: '2023-01-01',
                tahapan: 'Rapat Anggota'
            }],
            'Rantau Alai': [{
                desa: 'Desa O',
                kopdes: 'Kopdes Rantau A',
                tglBentuk: '2023-01-01',
                tahapan: 'SK Pengesahan'
            }],
            'Rantau Panjang': [{
                desa: 'Desa P',
                kopdes: 'Kopdes Rantau P',
                tglBentuk: '2023-01-01',
                tahapan: 'Musyawarah'
            }],
            'Sungai Pinang': [{
                desa: 'Desa Q',
                kopdes: 'Kopdes Sungai P',
                tglBentuk: '2023-01-01',
                tahapan: 'Penyerahan NPAK'
            }],
            'Tanjung Batu': [{
                desa: 'Desa R',
                kopdes: 'Kopdes Tanjung',
                tglBentuk: '2023-01-01',
                tahapan: 'Pengumuman BN'
            }],
            'Tanjung Raja': [{
                desa: 'Desa S',
                kopdes: 'Kopdes Raja',
                tglBentuk: '2023-01-01',
                tahapan: 'Musyawarah'
            }]
        };

        let chart;

        function renderChart() {
            const filter = document.getElementById('filterTahapan').value;
            const kecamatanNames = [];
            const kopdesCounts = [];
            const colors = [];

            for (const [kecamatan, dataDesa] of Object.entries(kecamatanData)) {
                let count = 0;
                for (const desa of dataDesa) {
                    if (!filter || desa.tahapan === filter) {
                        count++;
                    }
                }
                kecamatanNames.push(kecamatan);
                kopdesCounts.push(count);

                // Perbaiki logika warna
                if (count < 3) {
                    colors.push('#ef4444'); // merah
                } else if (count < 8) {
                    colors.push('#facc15'); // kuning
                } else {
                    colors.push('#3b82f6'); // biru
                }
            }

            const options = {
                chart: {
                    type: 'bar',
                    height: 400,
                    events: {
                        dataPointSelection: (event, chartContext, config) => {
                            const selectedKecamatan = kecamatanNames[config.dataPointIndex];
                            showDetail(selectedKecamatan);
                        }
                    }
                },
                plotOptions: {
                    bar: {
                        horizontal: false,
                        borderRadius: 4
                    }
                },
                dataLabels: {
                    enabled: true
                },
                xaxis: {
                    categories: kecamatanNames
                },
                colors: colors, // warna batang dinamis
                title: {
                    text: 'Jumlah Kopdes per Kecamatan',
                    align: 'center',
                    style: {
                        fontSize: '18px',
                        fontWeight: 'bold',
                        color: '#1e40af'
                    }
                },
                series: [{
                    name: 'Jumlah Kopdes',
                    data: kopdesCounts
                }]
            };

            if (chart) {
                chart.updateOptions(options);
            } else {
                chart = new ApexCharts(document.querySelector("#chart"), options);
                chart.render();
            }
        }

        function showDetail(kecamatan) {
            const detailSection = document.getElementById('detailData');
            const tableBody = document.getElementById('detailTableBody');
            tableBody.innerHTML = '';

            if (kecamatanData[kecamatan]) {
                for (const desa of kecamatanData[kecamatan]) {
                    const row = `<tr>
                <td class="ltr:text-left rtl:text-right whitespace-nowrap px-[20px] py-[15px] md:ltr:first:pl-[25px] md:rtl:first:pr-[25px] ltr:first:pr-0 rtl:first:pl-0 border-b border-gray-100 dark:border-[#172036]"">${desa.desa}</td>
                <td class="ltr:text-left rtl:text-right whitespace-nowrap px-[20px] py-[15px] md:ltr:first:pl-[25px] md:rtl:first:pr-[25px] ltr:first:pr-0 rtl:first:pl-0 border-b border-gray-100 dark:border-[#172036]"">${desa.kopdes}</td>
                <td class="ltr:text-left rtl:text-right whitespace-nowrap px-[20px] py-[15px] md:ltr:first:pl-[25px] md:rtl:first:pr-[25px] ltr:first:pr-0 rtl:first:pl-0 border-b border-gray-100 dark:border-[#172036]"">${desa.tglBentuk}</td>
                <td class="ltr:text-left rtl:text-right whitespace-nowrap px-[20px] py-[15px] md:ltr:first:pl-[25px] md:rtl:first:pr-[25px] ltr:first:pr-0 rtl:first:pl-0 border-b border-gray-100 dark:border-[#172036]"">${desa.tahapan}</td>
              </tr>`;
                    tableBody.innerHTML += row;
                }
                detailSection.classList.remove('hidden');
                detailSection.scrollIntoView({
                    behavior: "smooth"
                });
            }
        }

        // Pertama kali load
        renderChart();
    </script>
</body>

</html>